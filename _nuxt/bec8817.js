(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{580:function(e,t,n){var content=n(605);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(26).default)("8bf43b96",content,!0,{sourceMap:!1})},604:function(e,t,n){"use strict";n(580)},605:function(e,t,n){var r=n(25)(!1);r.push([e.i,".selectable[data-v-2b1838d5]{cursor:pointer}",""]),e.exports=r},609:function(e,t,n){"use strict";var r=n(120),o=n(553),c=n(121),l=n(248),f=(n(17),n(14),n(16),n(22),n(15),n(23),n(2)),m=n(83),d=n(20);n(55),n(8),n(46),n(76),n(44),n(34),n(170),n(89),n(39),n(36),n(211),n(54),n(61);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(f.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={name:"FileSelector",data:function(){return{imgFailed:!1,FULL_IMAGE:{maxDimension:1280,quality:.9},THUMB_IMAGE:{maxDimension:640,quality:.7},userRepo:{images:[]}}},created:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUserRepo();case 2:case"end":return t.stop()}}),t)})))()},computed:{user:function(){return this.$nuxt.$store.state.authUser},eventImagesReversedLength:function(){return Object(m.a)(Array(this.userRepo.images.length).keys()).slice().reverse()},isDeletingImage:function(){if(!this.userRepo)return[];var e=this.userRepo.images.map((function(e){return!1}));return e},isUploadingImage:function(){if(!this.userRepo)return[];var e=this.userRepo.images.map((function(e){return!1}));return e}},methods:{selectImage:function(img){var image={src:img.imageUrl,alt:""};this.$emit("select-file",image)},getUserRepo:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nuxt.$fire.firestore.collection("repoImages").doc(e.user.uid).get();case 2:(n=t.sent).exists&&(r=n.id,data=n.data(),e.userRepo=v(v({},data),{},{id:r}));case 4:case"end":return t.stop()}}),t)})))()},deleteImage:function(e){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isDeletingImage[e]=!0,r=t.$nuxt.$fire.storage.refFromURL(t.userRepo.images[e].imageUrl).delete(),o=t.$nuxt.$fire.storage.refFromURL(t.userRepo.images[e].teaserImageUrl).delete(),n.abrupt("return",Promise.all([r,o]).then(Object(d.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.userRepo.images[e].imageUrl="",t.userRepo.images[e].teaserImageUrl="",n.next=4,t.updateImageFirestore();case 4:return n.abrupt("return",null);case 5:case"end":return n.stop()}}),n)})))).catch(function(){var n=Object(d.a)(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.error("Error deleting image",r),"storage/object-not-found"!==r.code){n.next=6;break}return t.userRepo.images[e].imageUrl="",t.userRepo.images[e].teaserImageUrl="",n.next=6,t.updateImageFirestore();case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).finally((function(){t.isDeletingImage[e]=!1})));case 4:case"end":return n.stop()}}),n)})))()},launchImageFile:function(e){var t="imageFile".concat(e);this.$refs[t][0].click()},launchImageFilePicker:function(){this.$refs.imageFilePicker.click()},uploadImageFile:function(e,t){var n=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var r,o,c,l,f,m,h,v,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:if((r=e[0]).type.match("image.*")){t.next=6;break}return alert("Please upload an image."),t.abrupt("return");case 6:return o={contentType:r.type},c=new Promise((function(e,t){n.generateVariation(r,n.FULL_IMAGE.maxDimension,n.FULL_IMAGE.quality,e)})),l=new Promise((function(e,t){n.generateVariation(r,n.THUMB_IMAGE.maxDimension,n.THUMB_IMAGE.quality,e)})),t.next=11,Promise.all([c,l]);case 11:return f=t.sent,m=Date.now().toString(),h=n.uploadSingleImageFile(m+"_"+r.name,f[0],o),v=m+"_"+r.name.substring(0,r.name.lastIndexOf("."))+"_thumb."+r.name.substring(r.name.lastIndexOf(".")+1),x=n.uploadSingleImageFile(v,f[1],o),t.next=18,Promise.all([h,x]).then(function(){var e=Object(d.a)(regeneratorRuntime.mark((function e(t){var image;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return image={imageUrl:t[0],teaserImageUrl:t[1]},n.userRepo.images.push(image),e.next=4,n.updateImageFirestore();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:case"end":return t.stop()}}),t)})))()},uploadSingleImageFile:function(e,t,n){return this.$nuxt.$fire.storage.ref("repoImages/".concat(this.user.uid,"/").concat(e)).put(t,n).then((function(e){return e.ref.getDownloadURL().then((function(e){return e}))})).catch((function(e){console.error("Error uploading image",e)}))},generateVariation:function(e,t,n,r){var o=this,c=new FileReader;c.onload=function(e){return c=e.target.result,(image=new Image).src=c,void(image.onload=function(){o.getScaledCanvas(image,t).toBlob(r,"image/jpeg",n)});var c,image},c.readAsDataURL(e)},getScaledCanvas:function(image,e){var t=document.createElement("canvas");return image.width>e||image.height>e?image.width>image.height?(t.width=e,t.height=e*image.height/image.width):(t.width=e*image.width/image.height,t.height=e):(t.width=image.width,t.height=image.height),t.getContext("2d").drawImage(image,0,0,image.width,image.height,0,0,t.width,t.height),t},addImage:function(){this.userRepo.images.push({imageUrl:"",teaserImageUrl:""})},removeImage:function(e){var t=this;return Object(d.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("Are you sure?")){n.next=3;break}return n.abrupt("return");case 3:if(""===t.userRepo.images[e].imageUrl){n.next=11;break}return n.next=6,t.deleteImage(e);case 6:return t.userRepo.images.splice(e,1),n.next=9,t.updateImageFirestore();case 9:n.next=12;break;case 11:t.userRepo.images.splice(e,1);case 12:case"end":return n.stop()}}),n)})))()},updateImageFirestore:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,data={images:e.userRepo.images},t.next=4,e.$nuxt.$fire.firestore.collection("repoImages").doc(e.user.uid).set(data).then((function(){e.success="Successfully updated!!",setTimeout((function(){e.success=null}),2e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),e.error="Could not set user information";case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},w=x,y=(n(604),n(65)),component=Object(y.a)(w,(function(){var e=this,t=e._self._c;return t(o.a,{staticStyle:{"margin-top":"20px",width:"100%",height:"fit-content"}},[t("div",{staticStyle:{width:"100%",height:"250px",overflow:"scroll"}},[t("div",{staticClass:"d-flex flex-row flex-wrap justify-center align-center"},e._l(e.userRepo.images,(function(img,i){return t("div",{key:i,staticStyle:{width:"100px",height:"100px",position:"relative",overflow:"visible",margin:"6px"}},[t(c.a,{staticClass:"close-button",staticStyle:{position:"absolute",top:"-12px",left:"-12px","z-index":"10"},attrs:{role:"button"},on:{click:function(t){return e.removeImage(i)}}},[e._v("mdi-close")]),e._v(" "),t(l.a,{staticClass:"selectable",staticStyle:{border:"thin solid rgba(0,0,0,0.12)",height:"100px",width:"100px","object-fit":"cover"},attrs:{alt:"img-"+i,src:e.imgFailed?"/img/image-not-found.png":img.teaserImageUrl},on:{error:function(t){e.imgFailed=!0},click:function(){e.selectImage(img)}}})],1)})),0)]),e._v(" "),t("input",{ref:"imageFilePicker",staticClass:"hidden",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:function(t){return t.preventDefault(),e.uploadImageFile(t.target.files,e.userRepo.images.length)}}}),e._v(" "),t(r.a,{staticClass:"mt-5",attrs:{block:""},on:{click:function(){e.launchImageFilePicker()}}},[t(c.a,[e._v("mdi-plus-circle")]),e._v("\n    Add More Photo\n  ")],1)],1)}),[],!1,null,"2b1838d5",null);t.a=component.exports},739:function(e,t,n){var content=n(840);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(26).default)("77485838",content,!0,{sourceMap:!1})},839:function(e,t,n){"use strict";n(739)},840:function(e,t,n){var r=n(25)(!1);r.push([e.i,".is-active{background-color:grey}.v-tab:nth-child(3){display:none}.tiptap_vuetify table{border-collapse:collapse;table-layout:fixed;width:100%;margin:0;overflow:hidden}.tiptap_vuetify table th{font-weight:700;text-align:left}.tiptap_vuetify table td,.tiptap_vuetify table th{min-width:1em;border:2px solid grey;padding:3px 5px;vertical-align:top;box-sizing:border-box;position:relative}.tiptap_vuetify table td{display:flex;justify-content:center;align-items:center}.tiptap_vuetify table td h1,.tiptap_vuetify table td h2,.tiptap_vuetify table td h3,.tiptap_vuetify table td h4,.tiptap_vuetify table td h5{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.tiptap_vuetify img{-o-object-fit:contain;object-fit:contain;max-width:100%;max-height:350px;display:block;margin-left:auto;margin-right:auto}",""]),e.exports=r},875:function(e,t,n){"use strict";n.r(t);n(609);var r=n(273),o={components:{TiptapVuetify:r.t},props:{value:{type:String,default:""},changed:{type:String,default:""}},watch:{content:function(e){this.$emit("input",e)},value:function(e){this.content=e||this.content}},mounted:function(){this.content=this.value||this.content},data:function(){return{html:"",extensions:[r.g,r.k,r.v,r.o,r.j,r.b],content:"",content2:'\n      <h1>Most basic use</h1>\n      <p>\n        You can use the buttons above to add different text decorations. For example:\n        <strong>\n          Bold.\n        </strong>\n        <i>\n          Italics.\n        </i>\n      </p>\n      <pre><code>You can even type some code.</code></pre>\n\n      <blockquote>\n        <p>Blockquote is awesome!</p>\n      </blockquote>\n      <p>Try adding a table like the one below:</p>\n      <table>\n        <tr>\n          <th colspan="2" data-colwidth="100,0">Wide header</th>\n        </tr>\n        <tr>\n          <td>One</td>\n          <td>Two</td>\n        </tr>\n        <tr>\n          <td>Three</td>\n          <td>Four</td>\n        </tr>\n      </table>\n      <p>List items:</p>\n      <ol>\n        <li>\n          <p>Item 1</p>\n        </li>\n        <li>\n          <p>Item 2</p>\n        </li>\n      </ol>\n    '}}},c=(n(839),n(65)),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("tiptap-vuetify",{staticClass:"tiptap_vuetify",attrs:{extensions:e.extensions},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);