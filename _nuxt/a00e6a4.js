(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{577:function(e,t,r){var o=r(31);e.exports=function(e){return o(Set.prototype.values,e)}},592:function(e,t,r){r(623)},593:function(e,t,r){"use strict";r(6)({target:"Set",proto:!0,real:!0,forced:!0},{addAll:r(624)})},594:function(e,t,r){"use strict";r(6)({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:r(278)})},595:function(e,t,r){"use strict";var o=r(6),n=r(53),l=r(31),c=r(57),d=r(26),f=r(123),h=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(e){var t=d(this),r=new(f(t,n("Set")))(t),o=c(r.delete);return h(e,(function(e){l(o,r,e)})),r}})},596:function(e,t,r){"use strict";var o=r(6),n=r(26),l=r(63),c=r(577),d=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{every:function(e){var t=n(this),r=c(t),o=l(e,arguments.length>1?arguments[1]:void 0);return!d(r,(function(e,r){if(!o(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},597:function(e,t,r){"use strict";var o=r(6),n=r(53),l=r(31),c=r(57),d=r(26),f=r(63),h=r(123),v=r(577),m=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(e){var t=d(this),r=v(t),o=f(e,arguments.length>1?arguments[1]:void 0),x=new(h(t,n("Set"))),S=c(x.add);return m(r,(function(e){o(e,e,t)&&l(S,x,e)}),{IS_ITERATOR:!0}),x}})},598:function(e,t,r){"use strict";var o=r(6),n=r(26),l=r(63),c=r(577),d=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{find:function(e){var t=n(this),r=c(t),o=l(e,arguments.length>1?arguments[1]:void 0);return d(r,(function(e,r){if(o(e,e,t))return r(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},599:function(e,t,r){"use strict";var o=r(6),n=r(53),l=r(31),c=r(57),d=r(26),f=r(123),h=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(e){var t=d(this),r=new(f(t,n("Set"))),o=c(t.has),v=c(r.add);return h(e,(function(e){l(o,t,e)&&l(v,r,e)})),r}})},600:function(e,t,r){"use strict";var o=r(6),n=r(31),l=r(57),c=r(26),d=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(e){var t=c(this),r=l(t.has);return!d(e,(function(e,o){if(!0===n(r,t,e))return o()}),{INTERRUPTED:!0}).stopped}})},601:function(e,t,r){"use strict";var o=r(6),n=r(53),l=r(31),c=r(57),d=r(33),f=r(26),h=r(214),v=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(e){var t=h(this),r=f(e),o=r.has;return d(o)||(r=new(n("Set"))(e),o=c(r.has)),!v(t,(function(e,t){if(!1===l(o,r,e))return t()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},602:function(e,t,r){"use strict";var o=r(6),n=r(31),l=r(57),c=r(26),d=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(e){var t=c(this),r=l(t.has);return!d(e,(function(e,o){if(!1===n(r,t,e))return o()}),{INTERRUPTED:!0}).stopped}})},603:function(e,t,r){"use strict";var o=r(6),n=r(21),l=r(26),c=r(48),d=r(577),f=r(55),h=n([].join),v=[].push;o({target:"Set",proto:!0,real:!0,forced:!0},{join:function(e){var t=l(this),r=d(t),o=void 0===e?",":c(e),n=[];return f(r,v,{that:n,IS_ITERATOR:!0}),h(n,o)}})},604:function(e,t,r){"use strict";var o=r(6),n=r(53),l=r(63),c=r(31),d=r(57),f=r(26),h=r(123),v=r(577),m=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{map:function(e){var t=f(this),r=v(t),o=l(e,arguments.length>1?arguments[1]:void 0),x=new(h(t,n("Set"))),S=d(x.add);return m(r,(function(e){c(S,x,o(e,e,t))}),{IS_ITERATOR:!0}),x}})},605:function(e,t,r){"use strict";var o=r(6),n=r(57),l=r(26),c=r(577),d=r(55),f=TypeError;o({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=l(this),r=c(t),o=arguments.length<2,h=o?void 0:arguments[1];if(n(e),d(r,(function(r){o?(o=!1,h=r):h=e(h,r,r,t)}),{IS_ITERATOR:!0}),o)throw f("Reduce of empty set with no initial value");return h}})},606:function(e,t,r){"use strict";var o=r(6),n=r(26),l=r(63),c=r(577),d=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{some:function(e){var t=n(this),r=c(t),o=l(e,arguments.length>1?arguments[1]:void 0);return d(r,(function(e,r){if(o(e,e,t))return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},607:function(e,t,r){"use strict";var o=r(6),n=r(53),l=r(31),c=r(57),d=r(26),f=r(123),h=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(e){var t=d(this),r=new(f(t,n("Set")))(t),o=c(r.delete),v=c(r.add);return h(e,(function(e){l(o,r,e)||l(v,r,e)})),r}})},608:function(e,t,r){"use strict";var o=r(6),n=r(53),l=r(57),c=r(26),d=r(123),f=r(55);o({target:"Set",proto:!0,real:!0,forced:!0},{union:function(e){var t=c(this),r=new(d(t,n("Set")))(t);return f(e,l(r.add),{that:r}),r}})},623:function(e,t,r){"use strict";r(277)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(385))},624:function(e,t,r){"use strict";var o=r(31),n=r(57),l=r(26);e.exports=function(){for(var e=l(this),t=n(e.add),r=0,c=arguments.length;r<c;r++)o(t,e,arguments[r]);return e}},750:function(e,t,r){"use strict";r(273);var o=r(274);t.a=Object(o.a)("flex")},806:function(e,t,r){"use strict";r(273);var o=r(274);t.a=Object(o.a)("layout")},880:function(e,t,r){"use strict";r.r(t);var o=r(632),n=r(120),l=r(111),c=r(92),d=r(383),f=r(569),h=r(1308),v=r(268),m=r(750),x=r(642),S=r(121),y=r(806),T=r(382),w=r(646),_=r(267),O=r(173),R=r(1088),k=r(2),D=r(19),j=(r(62),r(56),r(212),r(8),r(592),r(44),r(593),r(594),r(595),r(596),r(597),r(598),r(599),r(600),r(601),r(602),r(603),r(604),r(605),r(606),r(607),r(608),r(46),r(76),r(83),r(17),r(15),r(16),r(24),r(14),r(25),r(130)),I=r.n(j);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(k.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var P={data:function(){return{pollTypes:[{text:"Multi choice",value:"multi-choice"},{text:"Date",value:"date"},{text:"Single choice",value:"single-choice"}],success:null,error:null,modal:!1,modal2:!1,dialog:!1,valid:!0,isValid:!0,poll:{type:null,question:null,hint:null,options:{}},expireDate:"",expireTime:"",rules:{required:[function(e){return!!e||"Required Field"}]},contentRules:[function(e){return!!e||"Content is required"},function(e){return!!e&&e.length>=15&&e.length<=180||"Name must be greater than 15 and less than 180 characters"}]}},props:{value:{type:Boolean,default:!1},originalPoll:{type:Object,required:!0}},watch:{poll:{handler:function(e){this.isChoice&&!e.options.choices&&(this.addChoice(),this.addChoice())},deep:!0},originalPoll:{handler:function(e){this.poll=e,this.expireDate=I()(parseInt(e.expireAt)).format("YYYY-MM-D"),this.expireTime=I()(parseInt(e.expireAt)).format("HH:mm")},immediate:!0,deep:!0},value:function(e){this.dialog=e},dialog:function(e){this.$emit("input",e)}},computed:{isChoice:function(){return"multi-choice"===this.poll.type||"single-choice"===this.poll.type},user:function(){return this.$store.state.authUser}},methods:{cancelHandler:function(){this.poll={type:null,question:null,hint:null,options:{}},this.expireTime="",this.expireDate="",this.dialog=!1},clearChoice:function(e){var t=this;if(this.poll.options.choices.length<=2)return this.error="Must have atleast 2 choices",void setTimeout((function(){t.error=null}),2e3);this.poll.options.choices.splice(e,1),this.$forceUpdate()},addChoice:function(){this.poll.options&&this.poll.options.choices?this.poll.options.choices.push({value:"",count:0}):this.poll.options?this.poll.options.choices=[{value:"",count:0}]:this.poll&&(this.poll.options={choices:[{value:"",count:0}]}),this.$forceUpdate()},validateSubmit:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$refs.form.validate(),!e.isChoice||e.poll.options.choices&&!(e.poll.options.choices.length<2)){t.next=5;break}return e.error="There must be atleast 2 choices.",setTimeout((function(){e.error=null}),2e3),t.abrupt("return");case 5:if(new Set(e.poll.options.choices.map((function(e){return e.value}))).size===e.poll.options.choices.length){t.next=10;break}return e.error="Duplicate choice found. Choices must be unique.",setTimeout((function(){e.error=null}),2e3),t.abrupt("return");case 10:if(!r){t.next=19;break}return t.prev=11,t.next=14,e.editPoll().then((function(){}));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(11),e.error="Could not set user information";case 19:case"end":return t.stop()}}),t,null,[[11,16]])})))()},createPoll:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now().toString(),data=C(C({},e.poll),{},{expireAt:Date.parse(e.expireDate+"T"+e.expireTime).toString(),creatorId:e.user.uid,createdAt:r,updatedAt:r}),t.next=4,e.$fire.firestore.collection("polls").add(data).then((function(t){var r=t.id;e.$emit("poll",C({id:r},data)),e.dialog=!1})).catch((function(e){console.error("Error adding poll: ",e)}));case 4:case"end":return t.stop()}}),t)})))()},deletePoll:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.firestore.collection("polls").doc(e.poll.id).delete().catch((function(e){console.error("Error deleting polls: ",e)}));case 2:e.$emit("poll",null);case 3:case"end":return t.stop()}}),t)})))()},editPoll:function(){var e=this;return Object(D.a)(regeneratorRuntime.mark((function t(){var r,o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Date.now().toString(),r={question:e.poll.question,hint:e.poll.hint,options:e.poll.options,type:e.poll.type,creatorId:e.poll.creatorId,expireAt:Date.parse(e.expireDate+"T"+e.expireTime).toString()},Object(k.a)(r,"creatorId",e.user.uid),Object(k.a)(r,"createdAt",e.poll.createdAt||o),Object(k.a)(r,"updatedAt",o),data=r,t.next=4,e.$fire.firestore.collection("polls").doc(e.poll.id).update(data).catch((function(e){console.error("Error editing poll: ",e)}));case 4:e.$emit("poll",data),e.cancelHandler();case 6:case"end":return t.stop()}}),t)})))()}}},A=r(54),component=Object(A.a)(P,(function(){var e=this,t=e._self._c;return t("div",[t(v.a,{staticStyle:{float:"right",position:"relative"},attrs:{persistent:"","offset-y":"","content-class":"mx-3","max-width":"800px",scrollable:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(o.a,{staticStyle:{position:"absolute",left:"50%","z-index":"100",bottom:"50px","max-width":"min(calc(100% - 40px), 400px)",transform:"translate(-50%, -50%)",margin:"0 0 auto"},attrs:{type:"success",value:!!e.success}},[e._v(e._s(e.success))]),e._v(" "),t(o.a,{staticStyle:{position:"absolute",left:"50%","z-index":"100",bottom:"50px","max-width":"min(calc(100% - 40px), 400px)",transform:"translate(-50%, -50%)",margin:"0 0 auto"},attrs:{type:"error",value:!!e.error}},[e._v(e._s(e.error))]),e._v(" "),t(l.a,{staticStyle:{height:"fit-content"}},[t(c.d,[t("span",{staticClass:"headline"},[e._v("\n          Edit Poll\n        ")])]),e._v(" "),t(c.c,[t(x.a,{ref:"form",staticClass:"pt-30",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(f.a,{staticStyle:{"max-width":"800px"}},[t(T.a,[t(d.a,{attrs:{cols:"12",md:"12"}},[t(y.a,{attrs:{row:"",wrap:""}},[t(m.a,{attrs:{xs11:"",sm5:""}},[t(v.a,{attrs:{width:"290px"},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on;return[t(O.a,e._g({attrs:{label:"Select expiration date","prepend-icon":"event",readonly:"",rules:e.rules.required},model:{value:e.expireDate,callback:function(t){e.expireDate=t},expression:"expireDate"}},o))]}}]),model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[e._v(" "),t(h.a,{attrs:{scrollable:"",actions:""},on:{input:function(t){e.modal=!1}},model:{value:e.expireDate,callback:function(t){e.expireDate=t},expression:"expireDate"}})],1)],1),e._v(" "),t(_.a),e._v(" "),t(m.a,{attrs:{xs11:"",sm5:""}},[t(v.a,{attrs:{fullwidth:"",width:"290px"},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on;return[t(O.a,e._g({attrs:{label:"Select expiration time","prepend-icon":"access_time",readonly:"",rules:e.rules.required},model:{value:e.expireTime,callback:function(t){e.expireTime=t},expression:"expireTime"}},o))]}}]),model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[e._v(" "),t(R.a,{attrs:{persistent:!1,actions:""},model:{value:e.expireTime,callback:function(t){e.expireTime=t},expression:"expireTime"}})],1)],1)],1)],1),e._v(" "),t(d.a,[t(w.a,{attrs:{items:e.pollTypes,label:"Type of poll"},model:{value:e.poll.type,callback:function(t){e.$set(e.poll,"type",t)},expression:"poll.type"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12",md:"12"}},[t(O.a,{staticClass:"input-group--focused",attrs:{name:"question",label:"Question",id:"question",placeholder:"Which of these is your best pet?",type:"text","multi-line":"",rows:"3",rules:e.rules.required},model:{value:e.poll.question,callback:function(t){e.$set(e.poll,"question",t)},expression:"poll.question"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12",md:"12"}},[t(O.a,{staticClass:"input-group--focused",attrs:{name:"hint",label:"Hint",id:"hint",placeholder:"pssh here is some hint",type:"text","multi-line":"",rows:"3"},model:{value:e.poll.hint,callback:function(t){e.$set(e.poll,"hint",t)},expression:"poll.hint"}})],1),e._v(" "),e.isChoice&&e.poll.options.choices?t(d.a,{staticClass:"pa-0",attrs:{cols:"12"}},[e._l(e.poll.options.choices,(function(r,i){return t(T.a,{key:i,staticClass:"justify-center"},[t(d.a,{attrs:{cols:"8"}},[t(O.a,{attrs:{name:"choice",label:"Choice",id:"choice1",placeholder:"Choice",type:"text","multi-line":"",rows:"1",rules:e.rules.required},model:{value:r.value,callback:function(t){e.$set(r,"value",t)},expression:"choice.value"}})],1),e._v(" "),t(d.a,{attrs:{cols:"1"}},[t(n.a,{attrs:{text:"",icon:"",color:"red"},on:{click:function(t){return e.clearChoice(i)}}},[t(S.a,[e._v("clear")])],1)],1)],1)})),e._v(" "),t(T.a,[t(d.a,{staticClass:"d-flex justify-center"},[t(n.a,{staticClass:"ma-2",attrs:{fab:"",small:""},on:{click:e.addChoice}},[t(S.a,[e._v("add")])],1)],1)],1)],2):e._e()],1)],1)],1)],1),e._v(" "),t(c.a,[t(_.a),e._v(" "),t(n.a,{attrs:{color:"primary",disabled:!e.valid},on:{click:function(t){e.validateSubmit()}}},[e._v("\n          Save\n        ")]),e._v(" "),t(n.a,{attrs:{color:"error"},on:{click:function(t){e.deletePoll(),e.dialog=!1}}},[e._v("\n          Delete\n        ")]),e._v(" "),t(n.a,{attrs:{color:"primary",text:""},on:{click:e.cancelHandler}},[e._v("\n          Cancel")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);