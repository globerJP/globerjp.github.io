(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{177:function(t,e,n){"use strict";n.r(e);var r=n(10),o=(n(46),{data:function(){return{clipped:!1,drawer:!1,fixed:!1,miniVariant:!1,right:!0,rightDrawer:!1,error:null,success:null}},computed:{user:function(){return this.$store.state.authUser}},methods:{linkTo:function(address){this.$router.push({path:"/".concat(address)})},login:function(){this.$store.getters.isLoggedIn?this.$router.push("/dashboard"):this.$router.push({path:"/login"})},logout:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fire.auth.signOut();case 2:t.$router.push({path:"/"});case 3:case"end":return e.stop()}}),e)})))()}}}),c=n(52),l=n(57),f=n.n(l),d=n(378),C=n(385),v=n(176),h=n(101),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-toolbar",{staticClass:" dp-sp-none"},[n("v-toolbar-title",{staticClass:"headline text-uppercase md-5"},[n("nuxt-link",{staticClass:"container-logo font-weight-bold black--text",attrs:{to:"/"}},[n("div",{staticClass:"primary--text text-capitalize"},[t._v("Glober")]),t._v(" "),n("h1",{staticStyle:{display:"none"}},[t._v("\n          Glober - Services for International students in Japan\n        ")])])],1),t._v(" "),n("v-spacer"),t._v(" "),t.user?n("v-btn",{staticClass:"primary--text text-capitalize mr-3",attrs:{exact:""},on:{click:function(e){return e.stopPropagation(),t.logout()}}},[t._v("logout")]):n("v-btn",{staticClass:"primary--text text-capitalize mr-3",attrs:{exact:""},on:{click:function(e){return e.stopPropagation(),t.login()}}},[t._v("login")])],1)],1)}),[],!1,null,null,null);e.default=component.exports;f()(component,{VBtn:d.a,VSpacer:C.a,VToolbar:v.a,VToolbarTitle:h.a})},239:function(t,e,n){var content=n(322);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("531614ae",content,!0,{sourceMap:!1})},248:function(t,e,n){var content=n(359);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("56b15182",content,!0,{sourceMap:!1})},250:function(t,e,n){var content=n(369);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("5fb365ff",content,!0,{sourceMap:!1})},251:function(t,e,n){var content=n(371);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(25).default)("069f067f",content,!0,{sourceMap:!1})},258:function(t,e,n){"use strict";var r={components:{Navigation:n(177).default}},o=(n(358),n(52)),c=n(57),l=n.n(c),f=n(384),d=n(386),C=n(378),v=n(377),h=n(388),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("Navigation"),t._v(" "),n("v-main",[n("Nuxt")],1),t._v(" "),n("v-bottom-navigation",{attrs:{app:""}},[n("v-btn",{staticClass:"white primary--text",attrs:{to:"/",nuxt:""}},[t._v("Home\n      "),n("v-icon",[t._v("mdi-home")])],1),t._v(" "),n("v-btn",{staticClass:"white primary--text",attrs:{to:"/dashboard",nuxt:""}},[t._v("Dashboard\n      "),n("v-icon",[t._v("mdi-account")])],1)],1)],1)}),[],!1,null,null,null);e.a=component.exports;l()(component,{Navigation:n(177).default}),l()(component,{VApp:f.a,VBottomNavigation:d.a,VBtn:C.a,VIcon:v.a,VMain:h.a})},259:function(t,e,n){"use strict";var r={methods:{login:function(){this.$store.getters.isLoggedIn?this.$router.push("/dashboard"):this.$router.push({path:"/login"})}}},o=(n(368),n(52)),c=n(57),l=n.n(c),f=n(384),d=n(378),C=n(388),v=n(385),h=n(176),T=n(101),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("div",[n("v-toolbar",{staticClass:"dp-sp-none"},[n("v-toolbar-title",{staticClass:"headline text-uppercase md-5"},[n("nuxt-link",{staticClass:"container-logo font-weight-bold black--text",attrs:{to:"/"}},[n("div",{staticClass:"primary--text text-capitalize"},[t._v("Glober")]),t._v(" "),n("h1",{staticStyle:{display:"none"}},[t._v("\n            Glober - Services for International Students in Japan\n          ")])])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"primary--text text-capitalize mr-3",attrs:{exact:""},on:{click:function(e){return e.stopPropagation(),t.login()}}},[t._v("login")])],1)],1),t._v(" "),n("v-main",[n("Nuxt")],1)],1)}),[],!1,null,null,null);e.a=component.exports;l()(component,{VApp:f.a,VBtn:d.a,VMain:C.a,VSpacer:v.a,VToolbar:h.a,VToolbarTitle:T.a})},260:function(t,e,n){"use strict";n(370);var r=n(52),o=n(57),c=n.n(o),l=n(384),f=n(388),component=Object(r.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("v-main",[e("Nuxt")],1)],1)}),[],!1,null,null,null);e.a=component.exports;c()(component,{VApp:l.a,VMain:f.a})},276:function(t,e,n){n(277),t.exports=n(278)},312:function(t,e,n){"use strict";n.r(e),e.default=function(t){var e=t.store,n=t.redirect;if(!e.getters.isLoggedIn)return n("/login")}},321:function(t,e,n){"use strict";n(239)},322:function(t,e,n){var r=n(24)(!1);r.push([t.i,"h1[data-v-7633c9ae]{font-size:20px}",""]),t.exports=r},358:function(t,e,n){"use strict";n(248)},359:function(t,e,n){var r=n(24)(!1);r.push([t.i,"a{text-decoration:none;color:hsla(0,0%,100%,.7)!important}",""]),t.exports=r},368:function(t,e,n){"use strict";n(250)},369:function(t,e,n){var r=n(24)(!1);r.push([t.i,"a{text-decoration:none;color:hsla(0,0%,100%,.7)!important}",""]),t.exports=r},370:function(t,e,n){"use strict";n(251)},371:function(t,e,n){var r=n(24)(!1);r.push([t.i,"a{text-decoration:none;color:hsla(0,0%,100%,.7)!important}",""]),t.exports=r},372:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return l})),n.d(e,"getters",(function(){return f})),n.d(e,"actions",(function(){return d})),n.d(e,"mutations",(function(){return C}));var r=n(87),o=n(10),c=(n(56),n(62),n(46),["allClaims"]),l=function(){return{authUser:null,loggedIn:!1}},f={isLoggedIn:function(t){return!!t.authUser&&t.loggedIn}},d={nuxtServerInit:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var l,f,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(l=t.dispatch,null!==n.$fire.auth){o.next=3;break}throw"nuxtServerInit Example not working - this.$fire.auth cannot be accessed.";case 3:if(null!==e.$fire.auth){o.next=5;break}throw"nuxtServerInit Example not working - ctx.$fire.auth cannot be accessed.";case 5:if(null!==e.app.$fire.auth){o.next=7;break}throw"nuxtServerInit Example not working - ctx.$fire.auth cannot be accessed.";case 7:if(!(e.res&&e.res.locals&&e.res.locals.user)){o.next=11;break}return f=e.res.locals.user,f.allClaims,d=Object(r.a)(f,c),o.next=11,l("onAuthStateChanged",d);case 11:case"end":return o.stop()}}),o)})))()},onAuthStateChanged:function(t,e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.commit,c=t.dispatch,l=e.authUser,e.claims,!window.location.pathname.includes("/signup")){r.next=4;break}return r.abrupt("return");case 4:if(l){r.next=11;break}return r.next=7,n.$router.push("/");case 7:return r.next=9,c("account/RESET_ACCOUNT");case 9:return o("RESET_STORE"),r.abrupt("return");case 11:if(l.emailVerified){r.next=13;break}return r.abrupt("return");case 13:if(!l){r.next=24;break}return r.prev=14,r.next=17,c("account/FETCH_ACCOUNT");case 17:return r.next=19,n.$router.push("/dashboard");case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(14),console.error(r.t0);case 24:o("SET_USER",l);case 25:case"end":return r.stop()}}),r,null,[[14,21]])})))()}},C={RESET_STORE:function(t){t.authUser=null,t.loggedIn=!1},SET_USER:function(t,e){t.authUser={uid:e.uid,email:e.email,emailVerified:e.emailVerified,displayName:e.displayName,idToken:e.idToken},t.loggedIn=!0}}},373:function(t,e,n){"use strict";n.r(e),n.d(e,"mutations",(function(){return d})),n.d(e,"state",(function(){return C})),n.d(e,"actions",(function(){return v})),n.d(e,"getters",(function(){return h}));var r,o,c=n(10),l=n(1),f=(n(46),n(6)),d=Object(l.a)({},f.SET_ACCOUNT,(function(t,e){t[f.ACCOUNT]=e})),C=function(){return Object(l.a)({},f.ACCOUNT,null)},v=(r={},Object(l.a)(r,f.RESET_ACCOUNT,(function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.commit,C[f.ACCOUNT]){e.next=3;break}return e.abrupt("return");case 3:n(f.SET_ACCOUNT,null);case 4:case"end":return e.stop()}}),e)})))()})),Object(l.a)(r,f.FETCH_ACCOUNT,(function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.commit,!C[f.ACCOUNT]){n.next=3;break}return n.abrupt("return",C[f.ACCOUNT]);case 3:return n.next=5,e.$fire.firestore.collection("users").doc(e.$fire.auth.currentUser.uid).get();case 5:if(o=n.sent,data={},!o.exists){n.next=11;break}data=o.data(),n.next=20;break;case 11:return n.prev=11,data={email:store.state.authUser.email,country:"",expectedGraduationYear:"",firstName:"",lastName:"",major:"",university:"",degree:""},n.next=15,$fire.firestore.collection("users").doc(store.state.authUser.uid).set(out);case 15:n.next=20;break;case 17:n.prev=17,n.t0=n.catch(11),console.log(n.t0);case 20:return r(f.SET_ACCOUNT,data),n.abrupt("return",data);case 22:case"end":return n.stop()}}),n,null,[[11,17]])})))()})),Object(l.a)(r,f.ENSURE_ACCOUNT_EXISTS,(function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dispatch,!(r=t.state)[f.ACCOUNT]){e.next=3;break}return e.abrupt("return",r[f.ACCOUNT]);case 3:return e.next=5,n(f.FETCH_ACCOUNT);case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)})))()})),r),h=(o={},Object(l.a)(o,f.ISADMIN,(function(t){return!(!t[f.ACCOUNT]||!t[f.ACCOUNT].isAdmin)&&t[f.ACCOUNT].isAdmin})),Object(l.a)(o,f.EMAIL,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].email:""})),Object(l.a)(o,f.EMAIL,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].email:""})),Object(l.a)(o,f.COUNTRY,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].country:""})),Object(l.a)(o,f.EXPECTEDGRADUATIONYEAR,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].expectedGraduationYear:""})),Object(l.a)(o,f.FIRSTNAME,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].firstName:""})),Object(l.a)(o,f.LASTNAME,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].lastName:""})),Object(l.a)(o,f.MAJOR,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].major:""})),Object(l.a)(o,f.UNIVERSITY,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].university:""})),Object(l.a)(o,f.DEGREE,(function(t){return t[f.ACCOUNT]?t[f.ACCOUNT].degree:""})),o)},375:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=375},6:function(t,e,n){"use strict";n.r(e),n.d(e,"ACCOUNT",(function(){return r})),n.d(e,"SET_ACCOUNT",(function(){return o})),n.d(e,"RESET_ACCOUNT",(function(){return c})),n.d(e,"FETCH_ACCOUNT",(function(){return l})),n.d(e,"ENSURE_ACCOUNT_EXISTS",(function(){return f})),n.d(e,"EMAIL",(function(){return d})),n.d(e,"COUNTRY",(function(){return C})),n.d(e,"EXPECTEDGRADUATIONYEAR",(function(){return v})),n.d(e,"FIRSTNAME",(function(){return h})),n.d(e,"LASTNAME",(function(){return T})),n.d(e,"MAJOR",(function(){return x})),n.d(e,"UNIVERSITY",(function(){return O})),n.d(e,"DEGREE",(function(){return m})),n.d(e,"ISADMIN",(function(){return N}));var r="ACCOUNT",o="SET_ACCOUNT",c="RESET_ACCOUNT",l="FETCH_ACCOUNT",f="ENSURE_ACCOUNT_EXISTS",d="EMAIL",C="COUNTRY",v="EXPECTEDGRADUATIONYEAR",h="FIRSTNAME",T="LASTNAME",x="MAJOR",O="UNIVERSITY",m="DEGREE",N="ISADMIN"},79:function(t,e,n){"use strict";var r={layout:"loginLayout",props:{error:{type:Object,default:null}},data:function(){return{pageNotFound:"404 Not Found",otherError:"An error occurred"}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}}},o=(n(321),n(52)),c=n(57),l=n.n(c),f=n(384),d=n(387),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[n("v-container",[404===t.error.statusCode?n("h1",[t._v("\n    "+t._s(t.pageNotFound)+"\n  ")]):n("h1",[t._v("\n    "+t._s(t.otherError)+"\n  ")]),t._v("\n  Go to "),n("NuxtLink",{staticClass:"primary--text",attrs:{to:"/"}},[t._v("\n    Home page\n  ")])],1)],1)}),[],!1,null,"7633c9ae",null);e.a=component.exports;l()(component,{VApp:f.a,VContainer:d.a})}},[[276,25,6,26]]]);